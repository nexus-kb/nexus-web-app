FROM node:22-bookworm

ENV DEBIAN_FRONTEND=noninteractive
ENV PNPM_HOME=/pnpm
ENV PNPM_STORE_PATH=/pnpm/store
ENV PATH=${PNPM_HOME}:${PATH}

RUN apt-get update && apt-get install -y --no-install-recommends \
    bash \
    ca-certificates \
    git \
    procps \
    tini \
    && rm -rf /var/lib/apt/lists/*

RUN corepack enable

WORKDIR /workspace/nexus-web-app

ENTRYPOINT ["/usr/bin/tini", "--"]
CMD ["bash", "-lc", "node --version && pnpm --version"]
